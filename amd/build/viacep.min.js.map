{"version":3,"file":"viacep.min.js","sources":["../src/viacep.js"],"sourcesContent":["import $ from 'jquery';\r\n\r\nconst init = async () => {\r\n    $(document).ready(() => {\r\n        const $cep = $('#id_postal_code');\r\n        const $address = $('#id_address');\r\n        const $neighbourhood = $('#id_neighbourhood');\r\n        const $city = $('#id_city');\r\n\r\n        if (!$cep.length) return;\r\n\r\n        // Cria popup de loading (overlay)\r\n        const $overlay = $(`\r\n            <div id=\"viacep-overlay\">\r\n                <div class=\"viacep-spinner\">\r\n                    <div class=\"viacep-loader\"></div>\r\n                    <p>Consultando CEP...</p>\r\n                </div>\r\n            </div>\r\n        `).css({\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            background: 'rgba(0,0,0,0.4)',\r\n            display: 'none',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            zIndex: 9999,\r\n        });\r\n\r\n        // CSS interno do spinner e texto\r\n        const spinnerCSS = `\r\n            #viacep-overlay .viacep-spinner {\r\n                text-align: center;\r\n                color: white;\r\n                font-size: 16px;\r\n                font-family: sans-serif;\r\n            }\r\n            #viacep-overlay .viacep-loader {\r\n                border: 4px solid #f3f3f3;\r\n                border-top: 4px solid #0073e6;\r\n                border-radius: 50%;\r\n                width: 50px;\r\n                height: 50px;\r\n                animation: spin 1s linear infinite;\r\n                margin: 0 auto 10px;\r\n            }\r\n            @keyframes spin {\r\n                0% { transform: rotate(0deg); }\r\n                100% { transform: rotate(360deg); }\r\n            }\r\n        `;\r\n\r\n        // Injeta o estilo dinamicamente\r\n        $('head').append(`<style>${spinnerCSS}</style>`);\r\n\r\n        // Adiciona overlay ao body\r\n        $('body').append($overlay);\r\n\r\n        $cep.on('blur', async function() {\r\n            const cep = $(this).val().replace(/\\D/g, '');\r\n            if (cep.length !== 8) return;\r\n\r\n            // Mostra overlay\r\n            $overlay.fadeIn(200);\r\n            $overlay.css({\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n            })\r\n\r\n            try {\r\n                const response = await $.getJSON(`https://viacep.com.br/ws/${cep}/json/`);\r\n                if (response.erro) {\r\n                    alert('CEP n√£o encontrado!');\r\n                    return;\r\n                }\r\n\r\n                $address.val(response.logradouro || '');\r\n                $neighbourhood.val(response.bairro || '');\r\n                $city.val(response.localidade || '');\r\n            } catch (error) {\r\n                console.error('Erro ao consultar o CEP:', error);\r\n                alert('Erro ao consultar o CEP.');\r\n            } finally {\r\n                // Esconde overlay\r\n                $overlay.fadeOut(200);\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\nexport default { init };\r\n"],"names":["init","async","document","ready","$cep","$address","$neighbourhood","$city","length","$overlay","css","position","top","left","width","height","background","display","justifyContent","alignItems","zIndex","append","on","cep","this","val","replace","fadeIn","response","$","getJSON","erro","alert","logradouro","bairro","localidade","error","console","fadeOut"],"mappings":"mPA8Fe,CAAEA,KA5FJC,8BACPC,UAAUC,OAAM,WACRC,MAAO,mBAAE,mBACTC,UAAW,mBAAE,eACbC,gBAAiB,mBAAE,qBACnBC,OAAQ,mBAAE,gBAEXH,KAAKI,OAAQ,aAGZC,UAAW,wQAOdC,IAAI,CACHC,SAAU,QACVC,IAAK,EACLC,KAAM,EACNC,MAAO,OACPC,OAAQ,OACRC,WAAY,kBACZC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,OAAQ,2BA2BV,QAAQC,8vBAGR,QAAQA,OAAOZ,UAEjBL,KAAKkB,GAAG,QAAQrB,uBACNsB,KAAM,mBAAEC,MAAMC,MAAMC,QAAQ,MAAO,OACtB,IAAfH,IAAIf,QAGRC,SAASkB,OAAO,KAChBlB,SAASC,IAAI,CACTO,QAAS,OACTE,WAAY,SACZD,eAAgB,qBAIVU,eAAiBC,gBAAEC,2CAAoCP,kBACzDK,SAASG,iBACTC,MAAM,uBAIV3B,SAASoB,IAAIG,SAASK,YAAc,IACpC3B,eAAemB,IAAIG,SAASM,QAAU,IACtC3B,MAAMkB,IAAIG,SAASO,YAAc,IACnC,MAAOC,OACLC,QAAQD,MAAM,2BAA4BA,OAC1CJ,MAAM,oCAGNvB,SAAS6B,QAAQ"}